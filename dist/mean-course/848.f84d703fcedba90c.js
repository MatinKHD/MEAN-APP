"use strict";(self.webpackChunkmean_course=self.webpackChunkmean_course||[]).push([[848],{8848:(y,l,o)=>{o.r(l),o.d(l,{UserModule:()=>b});var s=o(6814),c=o(4581),t=o(5879),n=o(6223),g=o(2333),d=o(4305),u=o(2296),f=o(9157),p=o(2032),h=o(8525),P=o(3680);function v(i,U){if(1&i&&t._UZ(0,"img",16),2&i){const e=t.oxw(2);t.Q6J("src",e.imagePreview,t.LSH)}}function x(i,U){if(1&i){const e=t.EpF();t.TgZ(0,"form",2),t.NdJ("submit",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onFormSubmitHandler())}),t.TgZ(1,"div",3),t.YNc(2,v,1,1,"img",4),t.TgZ(3,"input",5,6),t.NdJ("change",function(r){t.CHM(e);const m=t.oxw();return t.KtG(m.onFilePickerHandler(r))}),t.qZA(),t.TgZ(5,"button",7),t.NdJ("click",function(){t.CHM(e);const r=t.MAs(4);return t.KtG(r.click())}),t._uU(6," Select Profile "),t.qZA()(),t.TgZ(7,"mat-form-field")(8,"mat-label"),t._uU(9,"Name"),t.qZA(),t._UZ(10,"input",8),t.qZA(),t.TgZ(11,"mat-form-field")(12,"mat-label"),t._uU(13,"Lastname"),t.qZA(),t._UZ(14,"input",9),t.qZA(),t.TgZ(15,"div",10)(16,"label"),t._uU(17,"Email"),t.qZA(),t.TgZ(18,"div"),t._uU(19),t.qZA()(),t.TgZ(20,"mat-form-field")(21,"mat-select",11)(22,"mat-option",12),t._uU(23,"Man"),t.qZA(),t.TgZ(24,"mat-option",13),t._uU(25,"Woman"),t.qZA(),t.TgZ(26,"mat-option",14),t._uU(27,"Others"),t.qZA()()(),t.TgZ(28,"button",15),t._uU(29," Update "),t.qZA()()}if(2&i){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(2),t.Q6J("ngIf",e.imagePreview),t.xp6(17),t.Oqu(e.user.email),t.xp6(9),t.Q6J("disabled",e.form.invalid)}}let C=(()=>{class i{constructor(){this.authService=(0,t.f3M)(g.e),this.fb=(0,t.f3M)(n.qu),this.route=(0,t.f3M)(c.gz)}ngOnInit(){this.getId(),this.onFetchedUserProfile()}onFormSubmitHandler(){const e={id:"",name:this.form.get("name")?.value,lastname:this.form.get("lastname")?.value,email:this.user.email,gender:this.form.get("gender")?.value,image:this.form.get("image")?.value,imagePath:""};this.authService.updateUserProfile(this.id,e).subscribe({error:a=>console.log(a)})}onFilePickerHandler(e){const a=e.target.files;if(a&&a.length>0){const r=a[0];this.form.patchValue({image:r});const m=new FileReader;m.onload=()=>this.imagePreview=m.result,m.readAsDataURL(r)}}onInitializeForm(e){this.form=new n.cw({name:new n.NI(e.name?e.name:"",{validators:[n.kI.required]}),lastname:new n.NI(e?e.lastname:"",{validators:[n.kI.required]}),gender:new n.NI(e.gender?e.gender:"",{validators:[n.kI.required]}),image:new n.NI(e?e.imagePath:null,{validators:[n.kI.required],asyncValidators:d.z})}),this.imagePreview=e?.imagePath}onFetchedUserProfile(){this.isLoading=!0,this.authService.getUser(this.id).subscribe({next:({user:e})=>{this.user=e,this.onInitializeForm(e),this.isLoading=!1}})}getId(){this.route.params.subscribe(e=>{this.id=e.id})}static#t=this.\u0275fac=function(a){return new(a||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-profile"]],decls:2,vars:1,consts:[[1,"container"],[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],[1,"image-container"],["alt","",3,"src",4,"ngIf"],["type","file",2,"display","none",3,"change"],["filePicker",""],["type","button","mat-button","",3,"click"],["matInput","","type","text","placeholder","Name","formControlName","name"],["matInput","","type","text","placeholder","Lastname","formControlName","lastname"],[1,"email-contianer"],["mat-input","","formControlName","gender"],["value","man"],["value","woman"],["value","others"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["alt","",3,"src"]],template:function(a,r){1&a&&(t.TgZ(0,"div",0),t.YNc(1,x,30,4,"form",1),t.qZA()),2&a&&(t.xp6(1),t.Q6J("ngIf",r.form))},dependencies:[s.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,u.lW,f.KE,f.hX,p.Nt,h.gD,P.ey],styles:[".container[_ngcontent-%COMP%]{background-color:#9e9c9c23}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-flow:column;justify-content:start;align-items:center;margin:10px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:70%}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .email-contianer[_ngcontent-%COMP%]{width:70%;margin:10px 0;display:flex;font-size:16px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .email-contianer[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{flex:.2 0 auto;padding:10px 15px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .email-contianer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:.8 0 auto;background-color:#cacacab7;padding:10px 15px;box-shadow:0 0 5px #95959587}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;justify-content:start;align-items:center;width:70%;margin:10px 0;overflow:hidden;border-radius:5px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .image-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{flex:1 0 auto;height:75px;width:75px;border-radius:50%;box-shadow:0 0 7px 3px #69696987;margin:10px}"]})}return i})();var M=o(4015),O=o(4629);const Z=[{path:"profile/:id",component:C,canActivate:[M.a]}];let b=(()=>{class i{static#t=this.\u0275fac=function(a){return new(a||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[s.ez,n.UX,c.Bz.forChild(Z),O.h]})}return i})()}}]);